<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RMCQTMKDVP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RMCQTMKDVP');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Speed Verb Challenge - Maîtrisez les verbes irréguliers anglais dans cette expérience RPG immersive">
    <title>Speed Verb Challenge | English Quest</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=MedievalSharp&display=swap" rel="stylesheet">
    
    <!-- Base styles -->
    <link href="./dist/output.css" rel="stylesheet">
    <link href="./src/styles/layout.css" rel="stylesheet">
    
    <!-- Game-specific styles -->
    <link href="./src/styles/speed-verb-challenge.css" rel="stylesheet">
    <link href="./src/styles/button-fix.css" rel="stylesheet">
    <link href="./src/styles/mmorpg-enhanced.css" rel="stylesheet">
    
    <!-- Three.js -->
    <script async src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    
    <!-- Script de correction de la navigation -->
    <script src="src/js/navigation-fix.js" defer></script>
    
    <!-- Nouvel ajout: CSS pour les effets avancés -->
    <style>
        /* Effets de particules améliorés */
        .magic-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -5;
        }
        
        /* Effet de brume magique */
        .magic-fog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.05) 0%, transparent 70%),
                radial-gradient(ellipse at 80% 80%, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
            filter: blur(8px);
            opacity: 0.6;
            z-index: -6;
            animation: fogMovement 30s infinite alternate ease-in-out;
        }
        
        /* Runes flottantes améliorées */
        .arcane-runes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -4;
            pointer-events: none;
        }
        
        .rune {
            position: absolute;
            font-family: 'MedievalSharp', cursive;
            color: var(--primary-color);
            opacity: 0;
            text-shadow: 0 0 10px var(--primary-glow);
            animation: runeFloat 15s infinite ease-in-out;
        }
        
        @keyframes runeFloat {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        /* Effet de profondeur pour les cartes */
        .depth-card {
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
        }
        
        /* Suppression de l'effet de mouvement au survol */
        .depth-card:hover {
            transform: none;
        }
        
        /* Effet de portail amélioré */
        .enhanced-portal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.8) 0%, rgba(59, 130, 246, 0.1) 70%, transparent 100%);
            box-shadow: 0 0 50px rgba(59, 130, 246, 0.8), inset 0 0 30px rgba(255, 255, 255, 0.5);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
        }
        
        .enhanced-portal.active {
            animation: portalOpen 2s forwards ease-out;
        }
        
        @keyframes portalOpen {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
        }
        
        /* Effet de lumière pour les boutons */
        .glow-button {
            position: relative;
            overflow: hidden;
        }
        
        .glow-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .glow-button:hover::after {
            opacity: 1;
        }
        
        /* Style pour les bonus cumulatifs */
        .cumulative-bonus {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.8);
            font-style: italic;
            display: inline-block;
            margin-left: 4px;
            text-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
        }
        
        .power-item {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .power-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Styles pour l'option de seconde chance */
        .second-chance-option {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(23, 32, 57, 0.95), rgba(12, 17, 30, 0.98));
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            z-index: 1000;
            box-shadow: 
                0 0 30px rgba(255, 215, 0, 0.5),
                inset 0 0 15px rgba(255, 215, 0, 0.3);
            animation: secondChanceAppear 0.5s ease-out forwards;
            max-width: 90%;
            width: 400px;
        }
        
        .second-chance-title {
            font-size: 1.8rem;
            color: rgba(255, 215, 0, 0.9);
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            font-family: 'MedievalSharp', cursive;
            letter-spacing: 2px;
        }
        
        .second-chance-icon {
            margin-right: 10px;
            font-size: 1.5rem;
            animation: pulseIcon 2s infinite ease-in-out;
            display: inline-block;
        }
        
        .second-chance-desc {
            font-size: 1.2rem;
            color: var(--text-light);
            margin: 1.5rem 0;
        }
        
        .second-chance-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        @keyframes secondChanceAppear {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            70% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        @keyframes pulseIcon {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* Effet de lueur pour la seconde chance */
        .second-chance-glow {
            animation: secondChanceGlow 1s ease-out;
        }
        
        @keyframes secondChanceGlow {
            0% { box-shadow: 0 0 0 rgba(255, 215, 0, 0); }
            50% { box-shadow: 0 0 50px rgba(255, 215, 0, 0.7); }
            100% { box-shadow: 0 0 0 rgba(255, 215, 0, 0); }
        }
        
        /* Style pour le compteur spécial de secondes chances */
        .special-hud-item {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.2));
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
            animation: specialItemPulse 2s infinite ease-in-out;
        }
        
        @keyframes specialItemPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
            50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.4); }
        }
        
        /* Animation pour nouvelle seconde chance */
        .new-chance {
            animation: newChanceAnimation 2s ease-out;
        }
        
        @keyframes newChanceAnimation {
            0% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="game-body">
    <!-- Navigation -->
    <header class="site-header">
        <div class="container">
            <a href="index.html" class="site-logo">
                <img src="./images/logo.gif" alt="English Quest" width="80" height="80">
            </a>
            <nav class="main-navigation">
                <ul class="nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">Accueil</a></li>
                    <li class="nav-item"><a href="all-games.html" class="nav-link active">Jeux</a></li>
                    <li class="nav-item"><a href="courses.html" class="nav-link">Cours</a></li>
                    <li class="nav-item"><a href="leaderboard.html" class="nav-link">Classement</a></li>
                    <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Game container -->
    <div class="game-universe">
        <!-- Nouveaux éléments pour effets visuels -->
        <div class="magic-fog"></div>
        <div class="magic-particles" id="particles-js"></div>
        <div class="arcane-runes" id="arcane-runes"></div>
        <div class="enhanced-portal" id="enhanced-portal"></div>
        
        <!-- Fond 3D -->
        <div id="bg-scene"></div>
        
        <!-- Floating runes -->
        <div class="floating-runes"></div>
        
        <!-- Game UI -->
        <main class="game-interface">
            <!-- Game header -->
            <header class="game-header">
                <h1 class="game-title">Speed Verb Challenge</h1>
                <p class="game-subtitle">Maîtrisez les sorts anciens du <span class="magic-text">Lexicon Arcanum</span></p>
            </header>

            <!-- Game sections -->
            <div class="game-sections">
                <!-- Left panel: Rules & Leaderboard -->
                <section class="game-panel rules-panel depth-card">
                    <div class="panel-content">
                        <h2 class="panel-title">La Quête</h2>
                        <div class="quest-scroll">
                            <div class="quest-description">
                                <p><span class="drop-cap">B</span>rave lanceur de sorts, vous vous tenez devant l'<span class="highlight-text">Épreuve des Verbes</span>, un défi ancestral qui a mis à l'épreuve les plus dignes linguistes arcanes depuis des éons.</p>
                                
                                <h3>Votre Mission</h3>
                                <p>Conjuguez correctement les sorts de verbes qui apparaissent depuis le portail arcanique. Chaque incantation correcte renforce vos pouvoirs magiques et vous rapporte des points d'essence.</p>
                                
                                <h3>Les Règles</h3>
                                <ul>
                                    <li class="rule-item">
                                        <span class="rule-icon animated-icon">⏳</span>
                                        <div class="rule-content">
                                            <h4 class="rule-title">Temps Limité</h4>
                                            <p>Votre magie ne dure que <span class="highlight-text">90 secondes</span>. Utilisez-les sagement.</p>
                                        </div>
                                    </li>
                                    
                                    <li class="rule-item">
                                        <span class="rule-icon animated-icon">🎯</span>
                                        <div class="rule-content">
                                            <h4 class="rule-title">Voies Arcaniques</h4>
                                            <p>Choisissez une des voies suivantes:</p>
                                            <ul class="sub-rules">
                                                <li><span class="path-text">Voie de l'Apprenti ⚔️:</span> Conjuration du Passé Simple uniquement (1 point d'essence)</li>
                                                <li><span class="path-text">Voie de l'Adepte ⚔️⚔️:</span> Invocation du Participe Passé uniquement (2 points d'essence)</li>
                                                <li><span class="path-text">Voie du Maître ⚔️⚔️⚔️:</span> Enchantement complet du verbe - les deux formes (3 points d'essence)</li>
                                            </ul>
                                        </div>
                                    </li>
                                    
                                    <li class="rule-item">
                                        <span class="rule-icon animated-icon">🔄</span>
                                        <div class="rule-content">
                                            <h4 class="rule-title">Bannissement</h4>
                                            <p>Vous pouvez bannir les sorts difficiles, mais <span class="warning-text">aucune essence n'est récoltée</span> pour ces sorts.</p>
                                        </div>
                                    </li>
                                </ul>
                                
                                <h3>Récompenses</h3>
                                <p>Enchaînez les sorts corrects pour construire des <span class="highlight-text">combos arcaniques</span> ! Chaque incantation correcte consécutive amplifie votre multiplicateur d'essence.</p>
                                <p>Montez en niveau pour prolonger votre temps et débloquer des <span class="highlight-text">capacités spéciales</span> !</p>
                                
                                <div class="special-powers">
                                    <div class="power-item">
                                        <div class="power-icon">🔮</div>
                                        <div class="power-name">Dilatation Temporelle</div>
                                        <div class="power-desc">Niveau 2 : +10 secondes</div>
                                    </div>
                                    <div class="power-item">
                                        <div class="power-icon">✨</div>
                                        <div class="power-name">Amplificateur d'Essence</div>
                                        <div class="power-desc">Niveau 3 : +0.2 au multiplicateur <span class="cumulative-bonus">(+10 secondes)</span></div>
                                    </div>
                                    <div class="power-item">
                                        <div class="power-icon">🌟</div>
                                        <div class="power-name">Récupération de Sort</div>
                                        <div class="power-desc">Niveau 5 : seconde chance <span class="cumulative-bonus">(+0.2 au multiplicateur, +10 secondes)</span></div>
                                    </div>
                                    <div class="power-item">
                                        <div class="power-icon">⚡</div>
                                        <div class="power-name">Maîtrise Arcanique</div>
                                        <div class="power-desc">Niveau 7 : +0.3 au multiplicateur <span class="cumulative-bonus">(+seconde chance, +0.2 au multiplicateur, +10 secondes)</span></div>
                                    </div>
                                    <div class="power-item">
                                        <div class="power-icon">🕰️</div>
                                        <div class="power-name">Distorsion Temporelle</div>
                                        <div class="power-desc">Niveau 10 : +15 secondes <span class="cumulative-bonus">(+tous les bonus précédents)</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="leaderboard-container">
                            <h2 class="panel-title">Légendes Arcaniques</h2>
                            <div class="leaderboard-scroll">
                                <table class="leaderboard-table">
                                    <thead>
                                        <tr>
                                            <th>Rang</th>
                                            <th>Lanceur de sorts</th>
                                            <th>Essence</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="leaderboard-body">
                                        <!-- Leaderboard entries will be loaded here -->
                                        <tr class="loading-row">
                                            <td colspan="4"><span class="loading-text">Invocation des archives ancestrales<span class="loading-dots">...</span></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Right panel: Game area -->
                <section class="game-panel gameplay-panel depth-card">
                    <div class="panel-content">
                        <!-- Game state: start -->
                        <div id="game-start" class="game-state active">
                            <h2 class="panel-title">Préparez Vos Incantations</h2>
                            
                            <div class="difficulty-selection">
                                <h3>Sélectionnez votre voie arcanique :</h3>
                                <div class="difficulty-options">
                                    <label class="difficulty-option">
                                        <input type="radio" name="difficulty" value="1" checked>
                                        <span class="option-content">
                                            <span class="option-title">Voie de l'Apprenti</span>
                                            <span class="option-description">Passé Simple uniquement</span>
                                            <span class="option-reward">1 point d'essence par sort</span>
                                            <span class="difficulty-rune">ᚠ</span>
                                        </span>
                                    </label>
                                    
                                    <label class="difficulty-option">
                                        <input type="radio" name="difficulty" value="2">
                                        <span class="option-content">
                                            <span class="option-title">Voie de l'Adepte</span>
                                            <span class="option-description">Participe Passé uniquement</span>
                                            <span class="option-reward">2 points d'essence par sort</span>
                                            <span class="difficulty-rune">ᚦ</span>
                                        </span>
                                    </label>
                                    
                                    <label class="difficulty-option">
                                        <input type="radio" name="difficulty" value="3">
                                        <span class="option-content">
                                            <span class="option-title">Voie du Maître</span>
                                            <span class="option-description">Les deux formes requises</span>
                                            <span class="option-reward">3 points d'essence par sort</span>
                                            <span class="difficulty-rune">ᛟ</span>
                                        </span>
                                    </label>
                                </div>
                            </div>
                            
                            <button id="start-game-btn" class="game-button primary-button glow-button">
                                <span class="button-glow"></span>
                                <span class="button-text">Débuter l'Épreuve</span>
                                <span class="button-runes">ᚱᚢᚾᛖᛋ</span>
                            </button>
                        </div>
                        
                        <!-- Game state: playing -->
                        <div id="game-playing" class="game-state">
                            <!-- HUD -->
                            <div class="game-hud">
                                <div class="hud-item">
                                    <div class="hud-label">Niveau</div>
                                    <div id="player-level" class="hud-value">1</div>
                                </div>
                                
                                <div class="hud-item">
                                    <div class="hud-label">Essence</div>
                                    <div id="player-score" class="hud-value">0</div>
                                </div>
                                
                                <div class="hud-item">
                                    <div class="hud-label">Temps</div>
                                    <div id="time-left" class="hud-value">90</div>
                                </div>
                                
                                <div class="hud-item">
                                    <div class="hud-label">Multiplicateur</div>
                                    <div id="combo-multiplier" class="hud-value">x1.0</div>
                                </div>
                                
                                <!-- Nouveau compteur de secondes chances -->
                                <div id="second-chance-counter" class="hud-item special-hud-item" style="display: none;">
                                    <div class="hud-label">Secondes Chances</div>
                                    <div id="second-chance-count" class="hud-value">0</div>
                                </div>
                            </div>
                            
                            <!-- XP Bar -->
                            <div class="xp-bar-container">
                                <div class="xp-bar-label">Énergie Arcanique</div>
                                <div class="xp-bar">
                                    <div id="xp-progress" class="xp-bar-fill"></div>
                                </div>
                            </div>
                            
                            <!-- Verb challenge -->
                            <div class="verb-challenge">
                                <div class="verb-card">
                                    <div class="verb-info">
                                        <div class="verb-prompt">Lancez le sort de :</div>
                                        <div id="current-verb" class="verb-display floating-verb">begin</div>
                                        <div id="verb-translation" class="verb-translation">(commencer)</div>
                                    </div>

                                    <div id="verb-form-inputs" class="verb-inputs">
                                        <!-- Inputs will be generated based on difficulty -->
                                    </div>
                                    
                                    <!-- Verb actions -->
                                    <div class="verb-actions">
                                        <button id="check-answer-btn" class="game-button action-button glow-button">
                                            <span class="button-text">Lancer le Sort</span>
                                            <span class="action-icon">✦</span>
                                        </button>
                                        
                                        <button id="skip-verb-btn" class="game-button secondary-button glow-button">
                                            <span class="button-text">Bannir</span>
                                            <span class="action-icon">✧</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Feedback message -->
                            <div id="feedback-message" class="feedback-message"></div>
                        </div>
                        
                        <!-- Game state: game over -->
                        <div id="game-over" class="game-state">
                            <h2 class="panel-title">Énergie Arcanique Épuisée</h2>
                            
                            <div class="results-container">
                                <div class="final-score">
                                    <div class="score-label">Essence Collectée</div>
                                    <div id="final-score-value" class="score-value">0</div>
                                </div>
                                
                                <div class="stats-container">
                                    <div class="stat-item">
                                        <div class="stat-label">Niveau Atteint</div>
                                        <div id="final-level" class="stat-value">1</div>
                                    </div>

                                    <div class="stat-item">
                                        <div class="stat-label">Sorts Lancés</div>
                                        <div id="verbs-completed" class="stat-value">0</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">Meilleur Combo</div>
                                        <div id="highest-combo" class="stat-value">x1.0</div>
                                    </div>
                                </div>

                                <div class="name-entry">
                                    <label for="player-name">Inscrivez votre nom dans les Annales Arcaniques :</label>
                                    <input type="text" id="player-name" class="name-input" maxlength="15" placeholder="Votre nom">
                                </div>

                                <div class="game-over-actions">
                                    <button id="save-score-btn" class="game-button primary-button glow-button">
                                        <span class="button-glow"></span>
                                        <span class="button-text">Inscrire</span>
                                        <span class="button-runes">ᚱᚢᚾᛖᛋ</span>
                                    </button>
                                    
                                    <button id="play-again-btn" class="game-button secondary-button glow-button">
                                        <span class="button-text">Nouveau Rituel</span>
                                        <span class="button-runes">ᚱᚢᚾᛖᛋ</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- 3D Floating Objects -->
        <div id="floating-objects-container"></div>
        
        <!-- Achievement notifications -->
        <div id="achievements-container"></div>
        
        <!-- Particle effects container -->
        <div id="particles-container"></div>
        
        <!-- Magic portal effect -->
        <div id="magic-portal"></div>
    </div>

    <!-- SCRIPTS CORRIGÉS - CHARGEMENT UNIQUE -->
    <!-- Firebase depuis CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- Scripts du jeu dans le bon ordre -->
    <script src="./src/js/firebase-polyfill.js"></script>
    <script src="./src/js/firebase-init.js"></script>
    <script src="./src/js/verb-data.js"></script>
    <script src="./src/js/game-effects.js"></script>
    <script src="./src/js/speed-verb-leaderboard.js"></script>
    <script src="./src/js/speed-verb-challenge.js"></script>

    <!-- Scripts additionnels -->
    <script src="./src/js/consolidated-fix.js"></script>
    <script src="visit-counter.js"></script>

    <!-- Nouveau script pour les effets visuels améliorés -->
    <script>
        // Créer les runes flottantes
        function createFloatingRunes() {
            const runeContainer = document.getElementById('arcane-runes');
            const runes = ['ᚠ', 'ᚢ', 'ᚦ', 'ᚨ', 'ᚱ', 'ᚲ', 'ᚷ', 'ᚹ', 'ᚺ', 'ᚾ', 'ᛁ', 'ᛃ', 'ᛇ', 'ᛈ', 'ᛉ', 'ᛊ', 'ᛏ', 'ᛒ', 'ᛖ', 'ᛗ', 'ᛚ', 'ᛜ', 'ᛞ', 'ᛟ'];
            
            for (let i = 0; i < 20; i++) {
                const rune = document.createElement('div');
                rune.className = 'rune';
                rune.textContent = runes[Math.floor(Math.random() * runes.length)];
                rune.style.left = `${Math.random() * 100}%`;
                rune.style.fontSize = `${Math.random() * 2 + 1}rem`;
                rune.style.animationDelay = `${Math.random() * 15}s`;
                rune.style.animationDuration = `${Math.random() * 10 + 15}s`;
                runeContainer.appendChild(rune);
            }
        }
        
        // Initialiser les particules
        function initParticles() {
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#3b82f6"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#3b82f6",
                        "opacity": 0.2,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": true,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 0.5
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
        }
        
        // Ajouter des effets 3D aux cartes
        function enhance3DCards() {
            const cards = document.querySelectorAll('.depth-card');
            
            // Désactivation de l'effet de mouvement au survol de la souris
            // Les cartes restent statiques pour une meilleure expérience utilisateur
            cards.forEach(card => {
                // Suppression des écouteurs d'événements qui causent le mouvement
                card.removeEventListener('mousemove', null);
                card.removeEventListener('mouseleave', null);
                
                // Réinitialisation de la transformation pour s'assurer qu'il n'y a pas d'effet résiduel
                card.style.transform = 'none';
            });
        }
        
        // Initialiser les effets visuels améliorés
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingRunes();
            initParticles();
            enhance3DCards();
            
            // Ajouter des écouteurs d'événements pour les effets spéciaux
            const startButton = document.getElementById('start-game-btn');
            const portal = document.getElementById('enhanced-portal');
            
            if (startButton && portal) {
                startButton.addEventListener('click', function() {
                    portal.classList.add('active');
                    setTimeout(() => {
                        portal.classList.remove('active');
                    }, 2000);
                });
            }
        });
    </script>
    
    <!-- Script pour les effets améliorés -->
    <script src="src/js/enhanced-effects.js"></script>
</body>
</html>