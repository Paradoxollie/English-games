<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽ¯ Test Avatar Simple - Enigma Scroll</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .test-section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid rgba(255,255,255,0.1);
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(145deg, #2196F3, #1976D2);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(145deg, #FF9800, #F57C00);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(145deg, #f44336, #d32f2f);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .status {
            background: rgba(0,255,0,0.1);
            border: 2px solid rgba(0,255,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .user-data {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        
        .avatar-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            max-width: 250px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .control-group {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
        }
        
        .control-group h3 {
            margin: 0 0 10px 0;
            color: #ffeb3b;
            font-size: 16px;
        }
        
        .control-group select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: none;
            background: rgba(255,255,255,0.9);
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ Test Avatar Simple - Enigma Scroll</h1>
        
        <div class="test-section">
            <h2>ðŸ”§ Configuration Rapide</h2>
            
            <div class="controls">
                <div class="control-group">
                    <h3>ðŸ‘¨ TÃªte</h3>
                    <select id="head-select">
                        <option value="default_boy">GarÃ§on</option>
                        <option value="default_girl">Fille</option>
                        <option value="bear">Ours</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <h3>ðŸ‘• Corps</h3>
                    <select id="body-select">
                        <option value="default_boy">GarÃ§on</option>
                        <option value="default_girl">Fille</option>
                        <option value="bear">Ours</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <h3>ðŸŽ­ Accessoire</h3>
                    <select id="accessory-select">
                        <option value="default">DÃ©faut (GIF)</option>
                        <option value="none">Aucun</option>
                        <option value="glasses">Lunettes</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <h3>ðŸŒ„ Fond</h3>
                    <select id="background-select">
                        <option value="default">DÃ©faut</option>
                        <option value="forest">ForÃªt</option>
                        <option value="castle">ChÃ¢teau</option>
                    </select>
                </div>
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn btn-primary" onclick="applySettings()">
                    ðŸŽ¨ Appliquer Skins
                </button>
                <button class="btn btn-secondary" onclick="testAvatar()">
                    ðŸ§ª Test Avatar
                </button>
                <button class="btn btn-warning" onclick="forceInit()">
                    ðŸš€ Forcer Init
                </button>
                <button class="btn btn-danger" onclick="resetAvatar()">
                    ðŸ”„ Reset
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ðŸ“Š Ã‰tat du SystÃ¨me</h2>
            <div class="status" id="status">Chargement...</div>
            <div class="user-data" id="user-data">Aucune donnÃ©e</div>
        </div>
    </div>
    
    <div class="avatar-info">
        <h3>ðŸŽ¯ Avatar Flottant</h3>
        <p>L'avatar devrait apparaÃ®tre en position fixe sur cette page.</p>
        <div style="margin-top: 10px;">
            <small id="avatar-status">VÃ©rification...</small>
        </div>
    </div>

    <!-- Charger le systÃ¨me d'avatar -->
    <script src="enigma-scroll-avatar-simple.js"></script>
    
    <script>
        // Variables globales
        let currentUser = {
            username: "TestUser",
            avatar: {
                head: "default_boy",
                body: "default_boy",
                accessory: "default",
                background: "default"
            }
        };
        
        // Fonctions
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
            console.log('[Test]', message);
        }
        
        function updateUserData() {
            document.getElementById('user-data').textContent = JSON.stringify(currentUser, null, 2);
        }
        
        function updateAvatarStatus() {
            const statusEl = document.getElementById('avatar-status');
            
            if (window.enigmaAvatar && window.enigmaAvatar.isInitialized) {
                statusEl.textContent = 'âœ… Avatar actif';
                statusEl.style.color = '#4CAF50';
            } else if (window.enigmaAvatar) {
                statusEl.textContent = 'â³ Avatar crÃ©Ã©, non initialisÃ©';
                statusEl.style.color = '#FF9800';
            } else {
                statusEl.textContent = 'âŒ Avatar non disponible';
                statusEl.style.color = '#f44336';
            }
        }
        
        function applySettings() {
            currentUser.avatar = {
                head: document.getElementById('head-select').value,
                body: document.getElementById('body-select').value,
                accessory: document.getElementById('accessory-select').value,
                background: document.getElementById('background-select').value
            };
            
            // Sauvegarder dans localStorage
            localStorage.setItem('english_quest_current_user', JSON.stringify(currentUser));
            updateUserData();
            updateStatus('Skins appliquÃ©s dans localStorage');
            
            // Mettre Ã  jour l'avatar
            if (typeof window.updateEnigmaAvatarFromProfile === 'function') {
                const success = window.updateEnigmaAvatarFromProfile(currentUser.avatar);
                updateStatus(success ? 'Avatar mis Ã  jour âœ…' : 'Ã‰chec mise Ã  jour avatar âŒ');
            } else {
                updateStatus('Fonction updateEnigmaAvatarFromProfile non disponible');
            }
        }
        
        function testAvatar() {
            if (window.enigmaAvatar) {
                window.enigmaAvatar.testMessage();
                window.enigmaAvatar.testAnimation();
                updateStatus('Tests avatar lancÃ©s');
            } else {
                updateStatus('Avatar non disponible pour les tests');
            }
        }
        
        function forceInit() {
            if (typeof window.forceInitEnigmaAvatar === 'function') {
                const success = window.forceInitEnigmaAvatar();
                updateStatus(success ? 'Initialisation forcÃ©e rÃ©ussie âœ…' : 'Ã‰chec initialisation âŒ');
            } else {
                updateStatus('Fonction forceInitEnigmaAvatar non disponible');
            }
        }
        
        function resetAvatar() {
            currentUser.avatar = {
                head: "default_boy",
                body: "default_boy",
                accessory: "default",
                background: "default"
            };
            
            document.getElementById('head-select').value = 'default_boy';
            document.getElementById('body-select').value = 'default_boy';
            document.getElementById('accessory-select').value = 'default';
            document.getElementById('background-select').value = 'default';
            
            applySettings();
            updateStatus('Avatar reset aux valeurs par dÃ©faut');
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[Test] Page simple chargÃ©e');
            
            // Mettre en place l'utilisateur de test
            localStorage.setItem('english_quest_current_user', JSON.stringify(currentUser));
            updateUserData();
            updateStatus('SystÃ¨me de test simple initialisÃ©');
            
            // VÃ©rifier l'Ã©tat de l'avatar pÃ©riodiquement
            setInterval(() => {
                updateAvatarStatus();
            }, 1000);
            
            console.log('[Test] Attente de l\'initialisation de l\'avatar...');
        });
        
        // Ã‰couter les changements dans les sÃ©lecteurs
        ['head-select', 'body-select', 'accessory-select', 'background-select'].forEach(id => {
            document.getElementById(id).addEventListener('change', () => {
                console.log('[Test] Changement dÃ©tectÃ© dans', id);
            });
        });
    </script>
</body>
</html> 