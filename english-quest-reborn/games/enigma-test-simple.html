<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enigma Scroll - Test Corrections</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: white;
      padding: 20px;
      margin: 0;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .game-stats {
      display: flex;
      justify-content: space-around;
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-label {
      font-size: 12px;
      opacity: 0.7;
    }
    
    .stat-value {
      font-size: 18px;
      font-weight: bold;
      color: #2ecc71;
    }
    
    .power-ups {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
    }
    
    .power-up-item {
      background: rgba(52, 152, 219, 0.9);
      border: 2px solid #3498db;
      border-radius: 10px;
      padding: 10px 15px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      min-width: 100px;
    }
    
    .power-up-item:hover {
      background: rgba(52, 152, 219, 1);
      transform: scale(1.05);
    }
    
    .power-up-item.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .game-grid {
      display: grid;
      grid-template-columns: repeat(5, 50px);
      gap: 5px;
      justify-content: center;
      margin: 20px 0;
    }
    
    .grid-cell {
      width: 50px;
      height: 50px;
      border: 2px solid #555;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      border-radius: 5px;
    }
    
    .grid-cell.filled {
      background: rgba(255,255,255,0.2);
    }
    
    .grid-cell.hint {
      background: linear-gradient(45deg, #f39c12, #e67e22) !important;
      color: #121212;
      animation: bounce 1s ease;
    }
    
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    
    .btn {
      background: #2ecc71;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      font-size: 16px;
    }
    
    .btn:hover {
      background: #27ae60;
    }
    
    .log {
      background: #333;
      padding: 15px;
      border-radius: 10px;
      font-family: monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 20px;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    .message {
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      padding: 15px 25px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 1000;
      display: none;
    }
    
    .message.success { background: #27ae60; }
    .message.error { background: #e74c3c; }
    .message.info { background: #3498db; }
    .message.warning { background: #f39c12; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üéÆ Enigma Scroll - Test Corrections</h1>
      <p>Testez tous les bonus corrig√©s !</p>
    </div>
    
    <div class="game-stats">
      <div class="stat-item">
        <div class="stat-label">Score</div>
        <div id="score-display" class="stat-value">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Combo</div>
        <div id="combo-display" class="stat-value">x1</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Temps</div>
        <div id="time-display" class="stat-value">90</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Mots</div>
        <div id="words-display" class="stat-value">0</div>
      </div>
    </div>
    
    <div class="power-ups">
      <div class="power-up-item" data-type="hint">
        üí°<br>Indice<br><span id="hint-count">3</span>
      </div>
      <div class="power-up-item" data-type="time">
        ‚è∞<br>+30s<br><span id="time-count">2</span>
      </div>
      <div class="power-up-item" data-type="skip">
        ‚è≠Ô∏è<br>Passer<br><span id="skip-count">1</span>
      </div>
    </div>
    
    <div class="game-grid" id="game-grid">
      <!-- Grille 5x6 -->
    </div>
    
    <div class="controls">
      <button class="btn" onclick="startGame()">üöÄ D√©marrer Jeu</button>
      <button class="btn" onclick="testPowerUps()">üß™ Test Power-ups</button>
      <button class="btn" onclick="triggerEvent()">üé≤ √âv√©nement Al√©atoire</button>
      <button class="btn" onclick="clearLog()">üóëÔ∏è Vider Log</button>
    </div>
    
    <div>
      <h3>üìã Instructions :</h3>
      <ul>
        <li><strong>Cliquez sur les power-ups</strong> pour les tester</li>
        <li><strong>Raccourcis clavier :</strong> 1=indice, 2=temps, 3=passer, 0=√©v√©nement</li>
        <li><strong>Tapez des lettres</strong> puis <strong>Entr√©e</strong> pour valider</li>
        <li><strong>Regardez la console</strong> pour les logs d√©taill√©s</li>
      </ul>
    </div>
    
    <div id="log" class="log">
      <div>üìã Log des √©v√©nements...</div>
    </div>
  </div>
  
  <div id="message" class="message"></div>

  <script>
    // √âtat du jeu
    window.gameActive = true;
    window.gameStats = {
      powerUps: { hint: 3, time: 2, skip: 1 },
      timeRemaining: 90,
      totalScore: 0,
      combo: 0,
      wordsFound: 0
    };
    
    window.currentGameWord = "HOUSE";
    window.currentRow = 0;
    window.currentCol = 0;
    window.currentGuess = "H";
    
    // Fonction de log
    function log(message) {
      const logEl = document.getElementById('log');
      const div = document.createElement('div');
      div.textContent = new Date().toLocaleTimeString() + ' - ' + message;
      logEl.appendChild(div);
      logEl.scrollTop = logEl.scrollHeight;
      console.log(message);
    }
    
    function clearLog() {
      document.getElementById('log').innerHTML = '<div>üìã Log des √©v√©nements...</div>';
    }
    
    // Messages
    function showMessage(message, type = 'info') {
      log(`üì¢ ${type}: ${message}`);
      
      const msgEl = document.getElementById('message');
      msgEl.textContent = message;
      msgEl.className = 'message ' + type;
      msgEl.style.display = 'block';
      
      setTimeout(() => {
        msgEl.style.display = 'none';
      }, 3000);
    }
    
    // Cr√©er la grille
    function createGrid() {
      const grid = document.getElementById('game-grid');
      grid.innerHTML = '';
      
      for (let row = 0; row < 6; row++) {
        for (let col = 0; col < 5; col++) {
          const cell = document.createElement('div');
          cell.className = 'grid-cell';
          cell.dataset.row = row;
          cell.dataset.col = col;
          
          if (row === 0 && col === 0) {
            cell.textContent = 'H';
            cell.classList.add('filled', 'hint');
          }
          
          grid.appendChild(cell);
        }
      }
    }
    
    // Power-ups
    function usePowerUp(type) {
      log(`üöÄ Power-up ${type} activ√©`);
      
      if (!window.gameActive) {
        showMessage('Jeu non actif !', 'error');
        return;
      }
      
      if (window.gameStats.powerUps[type] <= 0) {
        showMessage(`Aucun "${type}" disponible !`, 'error');
        return;
      }
      
      // Consommer
      window.gameStats.powerUps[type]--;
      updateDisplay();
      
      if (type === 'hint') {
        log('üí° Utilisation indice');
        showMessage('üí° Indice utilis√© !', 'success');
        
        // R√©v√©ler une lettre
        const word = window.currentGameWord;
        for (let i = 1; i < word.length; i++) {
          const cell = document.querySelector(`[data-row="0"][data-col="${i}"]`);
          if (cell && !cell.textContent) {
            cell.textContent = word[i];
            cell.classList.add('filled', 'hint');
            log(`üí° Lettre "${word[i]}" r√©v√©l√©e en position ${i+1}`);
            break;
          }
        }
        
      } else if (type === 'time') {
        log('‚è∞ Bonus temps');
        window.gameStats.timeRemaining += 30;
        showMessage('‚è∞ +30 secondes !', 'success');
        updateDisplay();
        
      } else if (type === 'skip') {
        log('‚è≠Ô∏è Passage mot');
        showMessage(`‚è≠Ô∏è Mot pass√© ! Le mot √©tait : ${window.currentGameWord}`, 'info');
        setTimeout(() => startGame(), 1000);
      }
      
      log(`‚úÖ Power-up ${type} ex√©cut√©`);
    }
    
    // √âv√©nement al√©atoire
    function triggerEvent() {
      const events = [
        () => {
          window.gameStats.timeRemaining += 30;
          updateDisplay();
          showMessage('üéâ √âV√âNEMENT ! ‚è∞ +30 secondes !', 'success');
        },
        () => {
          const types = ['hint', 'time', 'skip'];
          const type = types[Math.floor(Math.random() * types.length)];
          window.gameStats.powerUps[type]++;
          updateDisplay();
          showMessage(`üéâ √âV√âNEMENT ! üéÅ Power-up "${type}" offert !`, 'success');
        },
        () => {
          usePowerUp('hint');
          setTimeout(() => usePowerUp('hint'), 500);
          showMessage('üéâ √âV√âNEMENT ! üí° Double indice !', 'success');
        }
      ];
      
      const event = events[Math.floor(Math.random() * events.length)];
      log('üé≤ √âv√©nement al√©atoire d√©clench√©');
      event();
    }
    
    // Mise √† jour affichage
    function updateDisplay() {
      document.getElementById('score-display').textContent = window.gameStats.totalScore;
      document.getElementById('combo-display').textContent = 'x' + (window.gameStats.combo + 1);
      document.getElementById('time-display').textContent = window.gameStats.timeRemaining;
      document.getElementById('words-display').textContent = window.gameStats.wordsFound;
      
      document.getElementById('hint-count').textContent = window.gameStats.powerUps.hint;
      document.getElementById('time-count').textContent = window.gameStats.powerUps.time;
      document.getElementById('skip-count').textContent = window.gameStats.powerUps.skip;
      
      // √âtat visuel des power-ups
      document.querySelectorAll('.power-up-item').forEach(item => {
        const type = item.dataset.type;
        const count = window.gameStats.powerUps[type];
        if (count <= 0) {
          item.classList.add('disabled');
        } else {
          item.classList.remove('disabled');
        }
      });
    }
    
    // Tests
    function startGame() {
      log('üöÄ D√©marrage du jeu');
      window.gameActive = true;
      window.currentGameWord = ["HOUSE", "WORLD", "MAGIC", "QUEST", "DREAM"][Math.floor(Math.random() * 5)];
      createGrid();
      showMessage(`üéÆ Nouveau mot ! Trouvez le mot de ${window.currentGameWord.length} lettres`, 'info');
      log(`üéØ Mot secret: ${window.currentGameWord}`);
    }
    
    function testPowerUps() {
      log('üß™ Test automatique des power-ups');
      usePowerUp('hint');
      setTimeout(() => usePowerUp('time'), 1000);
      setTimeout(() => usePowerUp('skip'), 2000);
    }
    
    // Event listeners
    document.querySelectorAll('.power-up-item').forEach(item => {
      item.addEventListener('click', function() {
        const type = this.dataset.type;
        log(`üñ±Ô∏è Clic power-up ${type}`);
        usePowerUp(type);
      });
    });
    
    // Clavier
    document.addEventListener('keydown', function(e) {
      if (e.key === '1') {
        e.preventDefault();
        usePowerUp('hint');
      } else if (e.key === '2') {
        e.preventDefault();
        usePowerUp('time');
      } else if (e.key === '3') {
        e.preventDefault();
        usePowerUp('skip');
      } else if (e.key === '0') {
        e.preventDefault();
        triggerEvent();
      } else if (e.key === 'Enter') {
        e.preventDefault();
        showMessage('üéâ Validation ! (simulation)', 'success');
        window.gameStats.totalScore += 100;
        window.gameStats.combo++;
        window.gameStats.wordsFound++;
        updateDisplay();
        setTimeout(() => startGame(), 2000);
      }
    });
    
    // Initialisation
    createGrid();
    updateDisplay();
    log('‚úÖ Test initialis√©');
    log('üéÆ Raccourcis: 1=indice, 2=temps, 3=passer, 0=√©v√©nement, Entr√©e=valider');
    
    // √âv√©nements automatiques
    setInterval(() => {
      if (window.gameActive && Math.random() < 0.1) {
        triggerEvent();
      }
    }, 10000);
  </script>
</body>
</html> 