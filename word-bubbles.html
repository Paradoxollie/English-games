<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RMCQTMKDVP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-RMCQTMKDVP');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Bubbles 3D - English Quest</title>
    <link href="style.css" rel="stylesheet">
    <link href="word-bubbles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
    <!-- Three.js pour les effets 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- GSAP pour les animations avanc√©es -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <style>
        /* Animation de secousse pour le champ de saisie */
        @keyframes shake {
            0% { transform: translateX(0); }
            10% { transform: translateX(-10px); }
            20% { transform: translateX(10px); }
            30% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            50% { transform: translateX(-5px); }
            60% { transform: translateX(5px); }
            70% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
            90% { transform: translateX(-2px); }
            100% { transform: translateX(0); }
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        /* Styles pour le conteneur de jeu */
        #word-box {
            width: 100%;
            height: 400px;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid rgba(201, 170, 113, 0.3);
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        /* Styles pour les statistiques du jeu */
        #game-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(201, 170, 113, 0.3);
        }
        
        .stat-item {
            font-weight: bold;
            color: #c9aa71;
        }
    </style>
</head>
<body class="min-h-screen bg-quest-pattern bg-cover bg-fixed games-theme">
    <!-- Overlay pour les effets de particules -->
    <div id="particles-overlay"></div>
    
    <!-- Logo et Navigation -->
    <div class="logo-container">
        <img src="images/logo.gif" alt="English Quest Logo">
    </div>

    <nav>
        <div class="flex gap-8">
            <a href="index.html" class="nav-link">Home</a>
            <a href="all-games.html" class="nav-link active">Games</a>
            <a href="courses.html" class="nav-link">Courses</a>
            <a href="leaderboard.html" class="nav-link">Leaderboard</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </div>
    </nav>

    <main class="pt-32">
        <div class="container mx-auto px-4">
            <!-- Intro du jeu avec animation -->
            <div class="game-intro bg-black/60 rounded-xl p-6 mb-8 border border-quest-gold/30 intro-panel">
                <h2 class="text-2xl font-medieval text-quest-gold mb-4 glow-text">Bienvenue dans Word Bubbles 3D ! üåä</h2>
                
                <div class="game-description">
                    <p><strong class="highlight">üéØ Objectif :</strong> Saisis rapidement les mots en mode entrainement ou trouve des mots qui commencent par la lettre propos√©e en mode normal pour marquer des points.</p>
                    
                    <p class="mt-4"><strong class="highlight">üïπÔ∏è Instructions :</strong></p>
                    <ul class="list-disc list-inside space-y-2 ml-4 instructions-list">
                        <li>S√©lectionne le mode de jeu (Normal ou Training), puis appuie sur "Start Game".</li>
                        <li>Lis la lettre ou le mot dans les bulles 3D qui flottent dans l'espace.</li>
                        <li>Tape un mot qui commence par la lettre de la bulle ou le mot affich√©.</li>
                        <li>Si ta r√©ponse est correcte, tu gagnes des points et la bulle explose en particules magiques !</li>
                    </ul>
                    
                    <p class="mt-4"><strong class="highlight">‚è≥ Timer :</strong> Plus le jeu avance, plus les bulles acc√©l√®rent. Reste concentr√© !</p>
                    <p><strong class="highlight">üí° Conseil :</strong> √âvite les mots d√©j√† utilis√©s pour maximiser ton score.</p>
                </div>
            </div>

            <!-- Conteneur principal du jeu -->
            <div id="game-container" class="word-bubbles bg-black/80 rounded-xl p-6 border border-quest-gold/30">
                <!-- S√©lection du mode et difficult√© -->
                <div id="game-settings" class="mb-4 flex flex-wrap gap-4 justify-center">
                    <div class="setting-group">
                        <label for="game-mode" class="text-quest-gold">Mode de jeu:</label>
                        <select id="game-mode" class="game-select">
                            <option value="normal">Normal</option>
                            <option value="training">Training</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label for="difficulty-level" class="text-quest-gold">Difficult√©:</label>
                        <select id="difficulty-level" class="game-select">
                            <option value="easy">Facile</option>
                            <option value="medium">Moyen</option>
                            <option value="hard">Difficile</option>
                        </select>
                    </div>
                </div>

                <!-- Sc√®ne 3D pour les bulles -->
                <div id="game-scene-container">
                    <div id="word-box" class="scene-3d"></div>
                    <div id="game-stats">
                        <div id="score-display" class="stat-item">Score: 0</div>
                        <div id="time-display" class="stat-item">Temps: 0:00</div>
                        <div id="combo-display" class="stat-item">Combo: x1</div>
                    </div>
                </div>
                
                <!-- Contr√¥les du jeu -->
                <div id="game-controls" class="mt-4 flex flex-wrap gap-4 justify-center">
                    <input type="text" id="current-word" placeholder="Entrez un mot..." 
                           class="game-input">
                    <button id="submit-word" class="quest-button glow-button">Soumettre</button>
                    <button id="start-reset" class="quest-button glow-button">D√©marrer</button>
                </div>
                
                <!-- Affichage des messages -->
                <div id="message-container">
                    <div id="message" class="text-white mt-2 message-text"></div>
                </div>
                
                <!-- Tableau des meilleurs scores -->
                <div id="top-scores" class="mt-8 scores-panel">
                    <h3 class="text-quest-gold text-xl mb-4 glow-text">Meilleurs Scores</h3>
                    <ul id="top-scores-list" class="space-y-2 scores-list"></ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals pour les tutoriels et r√©compenses -->
    <div id="tutorial-modal" class="game-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Comment jouer √† Word Bubbles 3D</h2>
            <div class="tutorial-steps">
                <!-- Contenu du tutoriel -->
            </div>
            <button id="start-game-tutorial" class="quest-button glow-button">Commencer √† jouer</button>
        </div>
    </div>

    <div id="reward-modal" class="game-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>F√©licitations !</h2>
            <div id="reward-content"></div>
            <button id="continue-game" class="quest-button glow-button">Continuer</button>
        </div>
    </div>

    <footer class="fixed bottom-0 w-full">
        <div class="bg-gradient-to-t from-black via-black/95 to-black/75 backdrop-blur-sm border-t border-quest-gold/30">
            <div class="container mx-auto px-4 py-3">
                <div class="text-center">
                    <p class="text-quest-gold/90 font-quest">&copy; 2024 English Quest by Pierre Marienne</p>
                    <div id="visit-stats" class="text-quest-gold/70 mt-1 font-medieval"></div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="firebase-init.js"></script>
    <script src="word-bubbles.js"></script>
    <script src="visit-counter.js"></script>
</body>
</html>